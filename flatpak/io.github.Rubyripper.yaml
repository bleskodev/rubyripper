app-id: io.github.Rubyripper
runtime: org.freedesktop.Platform
runtime-version: '18.08'
sdk: org.freedesktop.Sdk
command: rrip_gui
rename-desktop-file: rubyripper.desktop
rename-icon: rubyripper
finish-args:
  - '--share=network'
  - '--socket=x11'
  - '--device=all'
  - '--filesystem=home'
modules:
  - shared-modules/gtk2/gtk2.json

  - name: cdparanoia
    no-parallel-make: true
    sources:
      - type: archive
        url: https://downloads.xiph.org/releases/cdparanoia/cdparanoia-III-10.2.src.tgz
        sha256: 005db45ef4ee017f5c32ec124f913a0546e77014266c6a1c50df902a55fe64df

  - name: cdrdao
    config-opts:
      - '--without-mp3-support'
      - '--without-ogg-support'
    sources:
      - type: archive
        url: https://downloads.sourceforge.net/cdrdao/cdrdao-1.2.4.tar.bz2
        sha256: 358d9cb83370ceaecdc60564cbf14c2ea2636eac60a966e2461c011ba09853b4

  - name: libcdio
    config-opts:
      - '--disable-static'
      - '--disable-cpp-progs'
      - '--disable-example-progs'
      - '--without-cd-drive'
      - '--without-cd-read'
      - '--without-cdda-player'
      - '--without-iso-info'
    sources:
      - type: archive
        url: https://ftp.gnu.org/gnu/libcdio/libcdio-2.0.0.tar.gz
        sha256: 1b481b5da009bea31db875805665974e2fc568e2b2afa516f4036733657cf958

  - name: cd-discid
    buildsystem: simple
    build-commands:
      - 'make install PREFIX=/app'
    sources:
      - type: archive
        url: http://linukz.org/download/cd-discid-1.4.tar.gz
        sha256: ffd68cd406309e764be6af4d5cbcc309e132c13f3597c6a4570a1f218edd2c63

  - name: vorbis-tools
    sources:
      - type: archive
        url: https://downloads.xiph.org/releases/vorbis/vorbis-tools-1.4.0.tar.gz
        sha256: a389395baa43f8e5a796c99daf62397e435a7e73531c9f44d9084055a05d22bc

  - name: wavegain
    buildsystem: simple
    build-commands:
      - 'gcc -DHAVE_CONFIG_H -o wavegain *.c -lm'
      - 'install -m 755 wavegain /app/bin/wavegain'
    sources:
      - type: archive
        url: http://www.rarewares.org/files/others/wavegain-1.3.1srcs.zip
        sha256: 939bdcae73c59851f0a4aaf4e1ecee0815d293f105cc6372c95d4bbeb9346d3d

  - name: vorbisgain
    config-opts:
      - '--enable-recursive'
    sources:
      - type: archive
        url: https://www.sjeng.org/ftp/vorbis/vorbisgain-0.36.zip
        sha256: e893be4c71f83799771e1335768588fdfb0f935e1add4b6e8133a6c6b07da1e3

  - name: mp3gain
    buildsystem: simple
    build-commands:
      - 'make OSTYPE=linux INSTALL_PATH=/app/bin install'
    sources:
      - type: archive
        url: https://downloads.sourceforge.net/mp3gain/mp3gain-1_6_2-src.zip
        sha256: 5cc04732ef32850d5878b28fbd8b85798d979a025990654aceeaa379bcc9596d

  - name: normalize
    sources:
      - type: archive
        url: https://savannah.nongnu.org/download/normalize/normalize-0.7.7.tar.gz
        sha256: 6055a2abccc64296e1c38f9652f2056d3a3c096538e164b8b9526e10b486b3d8

  - name: ruby
    config-opts:
      - '--disable-install-doc'
    sources:
      - type: archive
        url: https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.1.tar.gz
        sha256: 17024fb7bb203d9cf7a5a42c78ff6ce77140f9d083676044a7db67f1e5191cb8

  - name: bundler
    buildsystem: simple
    build-commands:
      - 'gem install --local bundler*.gem'
    sources:
      - type: file
        url: https://rubygems.org/downloads/bundler-2.0.1.gem
        sha256: c7e38039993c9c2edc27397aef4a3370a4b35c7fae3d93e434e501c4bd7656ea

  - rubygems.json

  - name: rubyripper
    config-opts:
      - '--enable-lang=all'
      - '--enable-gtk2'
      - '--enable-cli'
      - '--prefix=/app'
    sources:
      - type: dir
        path: ..
